[gd_scene load_steps=13 format=3 uid="uid://ctgss67e70gan"]

[ext_resource type="Script" path="res://player_manager.gd" id="1_uwe67"]
[ext_resource type="Texture2D" uid="uid://cqv7p2qoyx6mt" path="res://tabletop_textures/IMG_20240917_070156_972.jpg" id="2_3j8h7"]
[ext_resource type="Theme" uid="uid://byjfx31cqk6qt" path="res://Scenes/FalloutNVAmberTheme.tres" id="2_b4anq"]
[ext_resource type="PackedScene" uid="uid://caidjbr85fvy" path="res://PlayerClasses/Player.tscn" id="2_xjwne"]
[ext_resource type="PackedScene" uid="uid://dbqy0gbujn78" path="res://Scenes/Caravan/Caravan.tscn" id="3_qnxvu"]
[ext_resource type="Script" path="res://PlayerClasses/HumanPlayer.gd" id="3_ys5fo"]
[ext_resource type="PackedScene" uid="uid://d3tn8xycuivvq" path="res://Scenes/Caravan/CaravanValueCounter.tscn" id="6_5qcvu"]
[ext_resource type="PackedScene" uid="uid://bb51cpbx6i6kn" path="res://Scenes/Hand/Deck/Deck.tscn" id="6_xbpa7"]
[ext_resource type="Script" path="res://PlayerClasses/BotPlayer.gd" id="7_ao5mc"]
[ext_resource type="Script" path="res://Scenes/Hand/Deck/DeckSizeCounter.gd" id="8_uc4vp"]
[ext_resource type="PackedScene" uid="uid://l8saoo5gq6v7" path="res://Scenes/WinLoseLabel.tscn" id="9_wpiup"]
[ext_resource type="PackedScene" uid="uid://e0tsv8uo1qfs" path="res://Scenes/GameOverModal.tscn" id="12_330lx"]

[node name="TableTop" type="Control" node_paths=PackedStringArray("players", "starting_player")]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_uwe67")
players = [NodePath("Players/Player"), NodePath("Players/BotPlayer")]
starting_player = NodePath("Players/Player")

[node name="TextureRect" type="TextureRect" parent="."]
layout_mode = 1
anchors_preset = -1
anchor_right = 0.998
anchor_bottom = 0.998
offset_right = 0.303955
offset_bottom = 0.295959
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("2_3j8h7")
expand_mode = 1

[node name="Players" type="Control" parent="."]
unique_name_in_owner = true
layout_mode = 1
anchor_left = 0.622
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -1.54407
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("2_b4anq")

[node name="Player" parent="Players" instance=ExtResource("2_xjwne")]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.176
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -94.912
offset_top = 164.0
offset_right = -455.0
offset_bottom = -160.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("3_ys5fo")

[node name="Caravan3" parent="Players/Player" instance=ExtResource("3_qnxvu")]
layout_mode = 0
offset_left = -295.0
offset_top = -107.0
offset_right = -200.0
offset_bottom = 23.0
player = Object(Control,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"clip_children":0,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"clip_contents":false,"custom_minimum_size":Vector2(0, 0),"layout_direction":0,"layout_mode":3,"anchors_preset":-1,"anchor_left":0.176,"anchor_top":0.5,"anchor_right":1.0,"anchor_bottom":1.0,"offset_left":-94.912,"offset_top":164.0,"offset_right":-455.0,"offset_bottom":-160.0,"grow_horizontal":2,"grow_vertical":2,"rotation":0.0,"scale":Vector2(1, 1),"pivot_offset":Vector2(0, 0),"size_flags_horizontal":1,"size_flags_vertical":1,"size_flags_stretch_ratio":1.0,"auto_translate":true,"localize_numeral_system":true,"tooltip_text":"","focus_neighbor_left":NodePath(""),"focus_neighbor_top":NodePath(""),"focus_neighbor_right":NodePath(""),"focus_neighbor_bottom":NodePath(""),"focus_next":NodePath(""),"focus_previous":NodePath(""),"focus_mode":0,"mouse_filter":0,"mouse_force_pass_scroll_events":true,"mouse_default_cursor_shape":0,"shortcut_context":null,"theme":null,"theme_type_variation":&"","script":ExtResource("3_ys5fo"),"game_manager":null,"game_rules":null,"caravans":Array[Resource("res://Scenes/Caravan/Caravan.gd")]([]),"is_enemy_player":true,"reverse_caravans":false)


[node name="CaravanValueCounter" parent="Players/Player/Caravan3" instance=ExtResource("6_5qcvu")]
layout_mode = 0
offset_top = -36.0
offset_bottom = -6.0

[node name="Caravan2" parent="Players/Player" instance=ExtResource("3_qnxvu")]
layout_mode = 0
offset_left = -453.0
offset_top = -107.0
offset_right = -358.0
offset_bottom = 23.0
player = Object(Control,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"clip_children":0,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"clip_contents":false,"custom_minimum_size":Vector2(0, 0),"layout_direction":0,"layout_mode":3,"anchors_preset":-1,"anchor_left":0.176,"anchor_top":0.5,"anchor_right":1.0,"anchor_bottom":1.0,"offset_left":-94.912,"offset_top":164.0,"offset_right":-455.0,"offset_bottom":-160.0,"grow_horizontal":2,"grow_vertical":2,"rotation":0.0,"scale":Vector2(1, 1),"pivot_offset":Vector2(0, 0),"size_flags_horizontal":1,"size_flags_vertical":1,"size_flags_stretch_ratio":1.0,"auto_translate":true,"localize_numeral_system":true,"tooltip_text":"","focus_neighbor_left":NodePath(""),"focus_neighbor_top":NodePath(""),"focus_neighbor_right":NodePath(""),"focus_neighbor_bottom":NodePath(""),"focus_next":NodePath(""),"focus_previous":NodePath(""),"focus_mode":0,"mouse_filter":0,"mouse_force_pass_scroll_events":true,"mouse_default_cursor_shape":0,"shortcut_context":null,"theme":null,"theme_type_variation":&"","script":ExtResource("3_ys5fo"),"game_manager":null,"game_rules":null,"caravans":Array[Resource("res://Scenes/Caravan/Caravan.gd")]([]),"is_enemy_player":true,"reverse_caravans":false)


[node name="CaravanValueCounter" parent="Players/Player/Caravan2" instance=ExtResource("6_5qcvu")]
layout_mode = 0
offset_top = -36.0
offset_bottom = -6.0

[node name="Caravan1" parent="Players/Player" instance=ExtResource("3_qnxvu")]
layout_mode = 0
offset_left = -613.0
offset_top = -107.0
offset_right = -518.0
offset_bottom = 23.0
player = Object(Control,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"clip_children":0,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"clip_contents":false,"custom_minimum_size":Vector2(0, 0),"layout_direction":0,"layout_mode":3,"anchors_preset":-1,"anchor_left":0.176,"anchor_top":0.5,"anchor_right":1.0,"anchor_bottom":1.0,"offset_left":-94.912,"offset_top":164.0,"offset_right":-455.0,"offset_bottom":-160.0,"grow_horizontal":2,"grow_vertical":2,"rotation":0.0,"scale":Vector2(1, 1),"pivot_offset":Vector2(0, 0),"size_flags_horizontal":1,"size_flags_vertical":1,"size_flags_stretch_ratio":1.0,"auto_translate":true,"localize_numeral_system":true,"tooltip_text":"","focus_neighbor_left":NodePath(""),"focus_neighbor_top":NodePath(""),"focus_neighbor_right":NodePath(""),"focus_neighbor_bottom":NodePath(""),"focus_next":NodePath(""),"focus_previous":NodePath(""),"focus_mode":0,"mouse_filter":0,"mouse_force_pass_scroll_events":true,"mouse_default_cursor_shape":0,"shortcut_context":null,"theme":null,"theme_type_variation":&"","script":ExtResource("3_ys5fo"),"game_manager":null,"game_rules":null,"caravans":Array[Resource("res://Scenes/Caravan/Caravan.gd")]([]),"is_enemy_player":true,"reverse_caravans":false)


[node name="CaravanValueCounter2" parent="Players/Player/Caravan1" instance=ExtResource("6_5qcvu")]
layout_mode = 0
offset_top = -36.0
offset_bottom = -6.0

[node name="Deck" parent="Players/Player" instance=ExtResource("6_xbpa7")]
show_behind_parent = true
layout_direction = 2
layout_mode = 1
anchors_preset = -1
anchor_right = 1.408
offset_left = 544.0
offset_right = 1.34497
offset_bottom = 0.0

[node name="DeckSizeCounter" type="RichTextLabel" parent="Players/Player/Deck"]
layout_mode = 0
offset_left = -15.6725
offset_top = 43.0
offset_right = 109.328
offset_bottom = 68.0
bbcode_enabled = true
text = "[center]54 cards[/center]"
script = ExtResource("8_uc4vp")

[node name="WinLoseLabel" parent="Players/Player" instance=ExtResource("9_wpiup")]
layout_mode = 1
anchors_preset = 0
anchor_right = 0.0
anchor_bottom = 0.0
offset_left = -632.0
offset_top = -50.0
offset_right = -200.0
offset_bottom = -9.0
grow_horizontal = 1
grow_vertical = 1

[node name="BotPlayer" parent="Players" instance=ExtResource("2_xjwne")]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.167
anchor_right = 1.0
anchor_bottom = 0.46
offset_left = 95.021
offset_top = 161.0
offset_right = -269.0
offset_bottom = -137.08
rotation = 3.14159
script = ExtResource("7_ao5mc")
min_delay = 0.0
max_delay = 0.0

[node name="Caravan3" parent="Players/BotPlayer" instance=ExtResource("3_qnxvu")]
layout_mode = 0
offset_left = 395.0
offset_top = -97.0001
offset_right = 490.0
offset_bottom = 32.9999
player = Object(Control,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"clip_children":0,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"clip_contents":false,"custom_minimum_size":Vector2(0, 0),"layout_direction":0,"layout_mode":3,"anchors_preset":-1,"anchor_left":0.167,"anchor_top":0.0,"anchor_right":1.0,"anchor_bottom":0.46,"offset_left":95.021,"offset_top":161.0,"offset_right":-269.0,"offset_bottom":-137.08,"grow_horizontal":1,"grow_vertical":1,"rotation":3.14159,"scale":Vector2(1, 1),"pivot_offset":Vector2(0, 0),"size_flags_horizontal":1,"size_flags_vertical":1,"size_flags_stretch_ratio":1.0,"auto_translate":true,"localize_numeral_system":true,"tooltip_text":"","focus_neighbor_left":NodePath(""),"focus_neighbor_top":NodePath(""),"focus_neighbor_right":NodePath(""),"focus_neighbor_bottom":NodePath(""),"focus_next":NodePath(""),"focus_previous":NodePath(""),"focus_mode":0,"mouse_filter":0,"mouse_force_pass_scroll_events":true,"mouse_default_cursor_shape":0,"shortcut_context":null,"theme":null,"theme_type_variation":&"","script":ExtResource("7_ao5mc"),"min_delay":0.0,"max_delay":0.0)


[node name="CaravanValueCounter" parent="Players/BotPlayer/Caravan3" instance=ExtResource("6_5qcvu")]
layout_mode = 0
offset_left = 0.00012207
offset_top = -33.0
offset_bottom = -3.0

[node name="Caravan2" parent="Players/BotPlayer" instance=ExtResource("3_qnxvu")]
layout_mode = 0
offset_left = 553.0
offset_top = -97.0001
offset_right = 648.0
offset_bottom = 32.9999
player = Object(Control,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"clip_children":0,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"clip_contents":false,"custom_minimum_size":Vector2(0, 0),"layout_direction":0,"layout_mode":3,"anchors_preset":-1,"anchor_left":0.167,"anchor_top":0.0,"anchor_right":1.0,"anchor_bottom":0.46,"offset_left":95.021,"offset_top":161.0,"offset_right":-269.0,"offset_bottom":-137.08,"grow_horizontal":1,"grow_vertical":1,"rotation":3.14159,"scale":Vector2(1, 1),"pivot_offset":Vector2(0, 0),"size_flags_horizontal":1,"size_flags_vertical":1,"size_flags_stretch_ratio":1.0,"auto_translate":true,"localize_numeral_system":true,"tooltip_text":"","focus_neighbor_left":NodePath(""),"focus_neighbor_top":NodePath(""),"focus_neighbor_right":NodePath(""),"focus_neighbor_bottom":NodePath(""),"focus_next":NodePath(""),"focus_previous":NodePath(""),"focus_mode":0,"mouse_filter":0,"mouse_force_pass_scroll_events":true,"mouse_default_cursor_shape":0,"shortcut_context":null,"theme":null,"theme_type_variation":&"","script":ExtResource("7_ao5mc"),"min_delay":0.0,"max_delay":0.0)


[node name="CaravanValueCounter" parent="Players/BotPlayer/Caravan2" instance=ExtResource("6_5qcvu")]
layout_mode = 0
offset_left = 0.000106812
offset_top = -33.0
offset_bottom = -3.0

[node name="Caravan1" parent="Players/BotPlayer" instance=ExtResource("3_qnxvu")]
layout_mode = 0
offset_left = 713.0
offset_top = -97.0001
offset_right = 808.0
offset_bottom = 32.9999
player = Object(Control,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","visible":true,"modulate":Color(1, 1, 1, 1),"self_modulate":Color(1, 1, 1, 1),"show_behind_parent":false,"top_level":false,"clip_children":0,"light_mask":1,"visibility_layer":1,"z_index":0,"z_as_relative":true,"y_sort_enabled":false,"texture_filter":0,"texture_repeat":0,"material":null,"use_parent_material":false,"clip_contents":false,"custom_minimum_size":Vector2(0, 0),"layout_direction":0,"layout_mode":3,"anchors_preset":-1,"anchor_left":0.167,"anchor_top":0.0,"anchor_right":1.0,"anchor_bottom":0.46,"offset_left":95.021,"offset_top":161.0,"offset_right":-269.0,"offset_bottom":-137.08,"grow_horizontal":1,"grow_vertical":1,"rotation":3.14159,"scale":Vector2(1, 1),"pivot_offset":Vector2(0, 0),"size_flags_horizontal":1,"size_flags_vertical":1,"size_flags_stretch_ratio":1.0,"auto_translate":true,"localize_numeral_system":true,"tooltip_text":"","focus_neighbor_left":NodePath(""),"focus_neighbor_top":NodePath(""),"focus_neighbor_right":NodePath(""),"focus_neighbor_bottom":NodePath(""),"focus_next":NodePath(""),"focus_previous":NodePath(""),"focus_mode":0,"mouse_filter":0,"mouse_force_pass_scroll_events":true,"mouse_default_cursor_shape":0,"shortcut_context":null,"theme":null,"theme_type_variation":&"","script":ExtResource("7_ao5mc"),"min_delay":0.0,"max_delay":0.0)


[node name="CaravanValueCounter" parent="Players/BotPlayer/Caravan1" instance=ExtResource("6_5qcvu")]
layout_mode = 0
offset_left = 9.15527e-05
offset_top = -33.0
offset_bottom = -3.0

[node name="Deck" parent="Players/BotPlayer" instance=ExtResource("6_xbpa7")]
show_behind_parent = true
layout_direction = 2
layout_mode = 1
anchors_preset = -1
anchor_right = 1.408
offset_left = -172.0
offset_top = 1.59863e-05
offset_right = -172.0
offset_bottom = 1.59863e-05

[node name="WinLoseLabel" parent="Players/BotPlayer" instance=ExtResource("9_wpiup")]
layout_mode = 1
anchors_preset = 0
anchor_right = 0.0
anchor_bottom = 0.0
offset_left = 395.0
offset_top = -31.999
offset_right = 827.0
offset_bottom = 14.001
grow_horizontal = 1
grow_vertical = 1
text = "[center]DUNNO[/center]"

[node name="CenterContainer" type="CenterContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="GameOverModal" parent="CenterContainer" node_paths=PackedStringArray("game_manager") instance=ExtResource("12_330lx")]
visible = false
layout_mode = 2
game_manager = NodePath("../..")

[connection signal="lost" from="Players/Player" to="." method="on_player_lost"]
[connection signal="lost" from="Players/Player" to="Players/Player/WinLoseLabel" method="_on_player_lost"]
[connection signal="lost" from="Players/Player" to="CenterContainer/GameOverModal" method="_on_player_lost"]
[connection signal="turn_ended" from="Players/Player" to="." method="advance_turn"]
[connection signal="won" from="Players/Player" to="Players/Player/WinLoseLabel" method="_on_player_won"]
[connection signal="won" from="Players/Player" to="CenterContainer/GameOverModal" method="_on_player_won"]
[connection signal="deck_size_changed" from="Players/Player/Deck" to="Players/Player/Deck/DeckSizeCounter" method="_on_deck_deck_size_changed"]
[connection signal="lost" from="Players/BotPlayer" to="." method="on_player_lost"]
[connection signal="lost" from="Players/BotPlayer" to="Players/BotPlayer/WinLoseLabel" method="_on_player_lost"]
[connection signal="lost" from="Players/BotPlayer" to="CenterContainer/GameOverModal" method="_on_player_lost"]
[connection signal="turn_ended" from="Players/BotPlayer" to="." method="advance_turn"]
[connection signal="won" from="Players/BotPlayer" to="Players/BotPlayer/WinLoseLabel" method="_on_player_won"]
[connection signal="won" from="Players/BotPlayer" to="CenterContainer/GameOverModal" method="_on_player_won"]
